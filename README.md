# Тестовое задание в БНИПИ (FastApi)

[![Black code style](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/ambv/black)


## Описание проекта

HTTP сервис,  который на вход получает данные в json-формате со списком цифр, обратно пользователю направляет сумму всех цифр. Предоставляет клиенту rest api с интерфейсом openapi/swagger ui.

Реализовано:
- два метода - синхронный и асинхронный (пользователь получает ID сессии и получает ответ по ID сессии)
- схема хранения сессии и результата в Redis.

## Развертывание с Docker

- Клонируйте репозиторий:
```git clone https://github.com/baikov/fastapi-bnipi
```
- Переименуйте файл `.env.example` в `.env`
- Соберите и запустите контейнеры Docker: `docker compose up --build`
- Откройте сервис по адресу `http://127.0.0.1:8000/docs`


## Использование

После того, как контейнеры запущены, вы можете отправлять запросы к следующим точкам входа:



- `/async-calculate` - HTTP POST-запрос, который принимает массив чисел (в виде строк), асинхронно вычисляет их сумму и возвращает идентификатор сессии + cохраняет его в `cookie`.
- `/async-result` - HTTP GET-запрос, который извлекает результат ранее отправленного запроса, используя идентификатор сессии, хранящийся в `cookie`.
- `/get-result/{session_id}` - HTTP GET-запрос, который извлекает результат ранее отправленного запроса, используя идентификатор сессии, предоставленный в URL.
- `/calculate` - HTTP POST-запрос, который выполняет синхронное вычисление и возвращает результат.


## Тестирование

Для запуска тестов выполните
`docker compose run --rm fastapi pytest`
